package chain

import (
	"encoding/json"
	"testing"
)

func TestTraceParsing(t *testing.T) {
	json_str := ` {
		"output": "0x",
		"stateDiff": null,
		"trace": [
			{
				"action": {
					"callType": "call",
					"from": "0x99a2d5feaecb1a729d4f9af4197cc03bb9a37bc3",
					"gas": "0x5af868",
					"input": "0xd2d745b10000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000000090000000000000000000000000dc0d841f962759da25547c686fa440cf6c28c61000000000000000000000000f1c587a22fbf80af80446fa17e7322952f18456c000000000000000000000000cddb0d484ca1c625ffca0882396ef34ffff242e300000000000000000000000010ce6f9c7c22f82214c40755b3eea5f126a7148d000000000000000000000000d42eaa28c5eafee9a0040a7ac74dd3f4b57678bd000000000000000000000000ec15db470db85cc75b0e3fa5b6a0c607a5e8c64a000000000000000000000000a4195def477491ef7f00b8688c9b8032cd71bb2a0000000000000000000000008f1567bb4381f4ed53dbeb3c0dca5c4f189a111000000000000000000000000052124d5982576507dd4a18d6607225e64be168bb0000000000000000000000000000000000000000000000000000000000000009000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000000000000000000000000000000000000000000000000000000000e8d4a51000",
					"to": "0x1578f035581f664efa85a6da822464bd9edd8850",
					"value": "0x82f79cd9000"
				},
				"result": {
					"gasUsed": "0x43b61",
					"output": "0x"
				},
				"subtraces": 9,
				"traceAddress": [],
				"type": "call"
			},
			{
				"action": {
					"callType": "call",
					"from": "0x1578f035581f664efa85a6da822464bd9edd8850",
					"gas": "0x8fc",
					"input": "0x",
					"to": "0x0dc0d841f962759da25547c686fa440cf6c28c61",
					"value": "0xe8d4a51000"
				},
				"result": {
					"gasUsed": "0x0",
					"output": "0x"
				},
				"subtraces": 0,
				"traceAddress": [
					0
				],
				"type": "call"
			}
		]
	}`
	trace := new(TransactionTrace)
	err := json.Unmarshal([]byte(json_str), trace)
	if err != nil {
		t.Fatal(err)
	}
}
