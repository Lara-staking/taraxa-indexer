package api

import (
	"testing"

	"github.com/Taraxa-project/taraxa-indexer/models"
)

func TestProcess(t *testing.T) {
	tx := models.Transaction{
		Hash: "abc123",
		From: "0x99a2d5feaecb1a729d4f9af4197cc03bb9a37bc3",
		To:   "0x1578f035581f664efa85a6da822464bd9edd8850",
		Data: "0xd2d745b100000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000340000000000000000000000000000000000000000000000000000000000000001700000000000000000000000068ecf99daab887c221f4fe5ff325de9558153b99000000000000000000000000ab9baef3c6cc92fcb37e4b67dab58bbee1673590000000000000000000000000933059d2cd510896758c5aeda7d0e6449d576783000000000000000000000000360e1c8ad2d461e1e711ff7ca27666ba3e338dfd000000000000000000000000a6f3c76f18e2d006dfc05ec49298af5ad5b131150000000000000000000000007bcaf39fef1018e79ceabde60ce4db995687ccaf000000000000000000000000336ba65ebffd13acd91aad33e1f4315f8811d692000000000000000000000000f9188f1f88e50f137074d85c9d59c693cb4b1e0a0000000000000000000000000dc0d841f962759da25547c686fa440cf6c28c61000000000000000000000000f1c587a22fbf80af80446fa17e7322952f18456c000000000000000000000000cddb0d484ca1c625ffca0882396ef34ffff242e3000000000000000000000000e749754ec8cf03b1b9e10b81270b73af66e40f5400000000000000000000000010ce6f9c7c22f82214c40755b3eea5f126a7148d000000000000000000000000d42eaa28c5eafee9a0040a7ac74dd3f4b57678bd0000000000000000000000009184eec720322f3a1bee38aa2879e602ead46486000000000000000000000000ec15db470db85cc75b0e3fa5b6a0c607a5e8c64a00000000000000000000000007dbc3e2ca7894dc00c11cf460e4f4c43e888888000000000000000000000000a4195def477491ef7f00b8688c9b8032cd71bb2a0000000000000000000000008f1567bb4381f4ed53dbeb3c0dca5c4f189a111000000000000000000000000052124d5982576507dd4a18d6607225e64be168bb0000000000000000000000002b34ec1e751bbd345e8b2686f16044425fcc525b000000000000000000000000b56f7b1cdecca0a4915979dbdec29ec63315cdfd0000000000000000000000009574d76c2df7373c162715f9bf5ab93170746ec100000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000001b929b9ee181f57c15000000000000000000000000000000000000000000000000eb49743ab7882ecd800000000000000000000000000000000000000000000001d692e8756f105d9b00000000000000000000000000000000000000000000000583b8b963daafbd978000000000000000000000000000000000000000000000008168665351115e4d8000000000000000000000000000000000000000000000040b43329e160997328000000000000000000000000000000000000000000000005e1d61afaa6a373600000000000000000000000000000000000000000000000205a1994d444579360000000000000000000000000000000000000000000000005e1d61afaa6a37360000000000000000000000000000000000000000000000005e1d61afaa6a3736000000000000000000000000000000000000000000000002c1dc5cb026988c6880000000000000000000000000000000000000000000000046960943bfcfa9688000000000000000000000000000000000000000000000005e1d61afaa6a373600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000eb49743ab7882ecd8000000000000000000000000000000000000000000000008168665351115e4d80000000000000000000000000000000000000000000000930de8a4b2b51d40700000000000000000000000000000000000000000000000075a4ba1f228369ca00000000000000000000000000000000000000000000000075a4ba1f228369ca00000000000000000000000000000000000000000000000930de8a4b2b51d40700000000000000000000000000000000000000000000000930de8a4b2b51d40700000000000000000000000000000000000000000000003d070d58f68278b7f20000",
	}

	dag := models.Dag{
		Hash: "abc123",
	}

	pbft := models.Pbft{
		Hash: "abc123",
	}

	err := Process(&tx)
	t.Log(tx.Calldata)
	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}
	if tx.Calldata == nil {
		t.Error("Expected Calldata to be set")
	}

	err = Process(&dag)
	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}

	err = Process(&pbft)
	if err != nil {
		t.Errorf("Unexpected error: %v", err)
	}
}
